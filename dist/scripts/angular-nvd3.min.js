"use strict";angular.module("d3",[]).factory("d3Service",["$document","$q",function(a,b){var c=b.defer();return c.resolve(window.d3),{d3:function(){return c.promise}}}]),angular.module("angularNvd3",["d3"]),angular.module("angularNvd3").factory("nvd3Service",["$document","$q","d3Service",function(a,b,c){var d=b.defer();return c.d3().then(function(a){d.resolve({nv:window.nv,d3:a})}),{nvd3:function(){return d.promise}}}]),angular.module("angularNvd3").directive("chartRender",["nvd3Service",function(a){var b={template:"<svg></svg>",restrict:"AE",scope:{data:"=",options:"=?",api:"=?",events:"=?",config:"=?"},link:function(b,c){a.nvd3().then(function(a){function d(a,c,d){a&&c&&angular.forEach(a,function(f,g){"dispatch"===g?((void 0===c[g]||null===c[g])&&b._config.extended&&(c[g]={}),e(f,c[g])):"xScale"===g&&"scatterChart"===d||"yScale"===g&&"scatterChart"===d||"values"===g&&"pieChart"===d||["scatter","defined","options","axis","rangeBand","rangeBands"].indexOf(g)<0&&(void 0===c[g]||null===c[g]?b._config.extended&&(c[g]=f()):a[g](c[g]))})}function e(a,c){a&&c&&angular.forEach(a,function(d,e){void 0===c[e]||null===c[e]?b._config.extended&&(c[e]=d.on):a.on(e+"._",c[e])})}function f(a){var d=j(h(a),b.options[a]||{});b._config.extended&&(b.options[a]=d);var e=angular.element("<div></div>").html(d.html||"").addClass(a).addClass(d.class).removeAttr("style").css(d.css);d.html||e.text(d.text),d.enable&&("title"===a?c.prepend(e):"subtitle"===a?c.find(".title").after(e):"caption"===a&&c.append(e))}function g(){var a=j(i(),b.options.styles||{});b._config.extended&&(b.options.styles=a),angular.forEach(a.classes,function(a,b){a?c.addClass(b):c.removeClass(b)}),c.removeAttr("style").css(a.css)}function h(a){switch(a){case"title":return{enable:!1,text:"Write Your Title","class":"h4",css:{width:b.options.chart.width+"px",textAlign:"center"}};case"subtitle":return{enable:!1,text:"Write Your Subtitle",css:{width:b.options.chart.width+"px",textAlign:"center"}};case"caption":return{enable:!1,text:"Figure 1. Write Your Caption text.",css:{width:b.options.chart.width+"px",textAlign:"center"}}}}function i(){return{classes:{"with-3d-shadow":!0,"with-transitions":!0,gallery:!1},css:{}}}function j(a){return angular.forEach(arguments,function(b){b!==a&&angular.forEach(b,function(b,c){a[c]&&a[c].constructor&&a[c].constructor===Object?j(a[c],b):a[c]=b})}),a}var k=a.d3,l=a.nv,m={extended:!1,visible:!0,disabled:!1,autorefresh:!0,refreshDataOnly:!1};b._config=angular.extend(m,b.config),b.api={refresh:function(){b.api.updateWithOptions(b.options)},update:function(){b.chart.update()},updateWithOptions:function(a){return b.api.clearElement(),angular.isDefined(a)===!1?!1:b._config.visible?(b.chart=l.models[a.chart.type](),angular.forEach(b.chart,function(c,f){"options"===f||("dispatch"===f?((void 0===a.chart[f]||null===a.chart[f])&&b._config.extended&&(a.chart[f]={}),e(b.chart[f],a.chart[f])):["lines","lines1","lines2","bars","bars1","bars2","stack1","stack2","multibar","discretebar","pie","scatter","bullet","sparkline","legend","distX","distY","xAxis","x2Axis","yAxis","yAxis1","yAxis2","y1Axis","y2Axis","y3Axis","y4Axis","interactiveLayer","controls"].indexOf(f)>=0?((void 0===a.chart[f]||null===a.chart[f])&&b._config.extended&&(a.chart[f]={}),d(b.chart[f],a.chart[f],a.chart.type)):"clipEdge"===f&&"multiBarHorizontalChart"===b.options.chart.type||"clipVoronoi"===f&&"historicalBarChart"===b.options.chart.type||"color"===f&&"indentedTreeChart"===b.options.chart.type||"defined"===f&&("historicalBarChart"===b.options.chart.type||"cumulativeLineChart"===b.options.chart.type||"lineWithFisheyeChart"===b.options.chart.type)||"forceX"===f&&("multiBarChart"===b.options.chart.type||"discreteBarChart"===b.options.chart.type||"multiBarHorizontalChart"===b.options.chart.type)||"interpolate"===f&&"historicalBarChart"===b.options.chart.type||"isArea"===f&&"historicalBarChart"===b.options.chart.type||"size"===f&&"historicalBarChart"===b.options.chart.type||"stacked"===f&&"stackedAreaChart"===b.options.chart.type||"values"===f&&"pieChart"===b.options.chart.type||"xScale"===f&&"scatterChart"===b.options.chart.type||"yScale"===f&&"scatterChart"===b.options.chart.type||"x"===f&&("lineWithFocusChart"===b.options.chart.type||"multiChart"===b.options.chart.type)||"y"===f&&"lineWithFocusChart"===b.options.chart.type||"multiChart"===b.options.chart.type||(void 0===b.options.chart[f]||null===b.options.chart[f]?b._config.extended&&(b.options.chart[f]=c()):b.chart[f](b.options.chart[f])))}),b.api.updateWithData(b.data),(b.options.title||b._config.extended)&&f("title"),(b.options.subtitle||b._config.extended)&&f("subtitle"),(b.options.caption||b._config.extended)&&f("caption"),(b.options.styles||b._config.extended)&&g(),void l.addGraph(function(){return l.utils.windowResize(function(){b.chart.update()}),b.chart},b.options.chart.callback)):!1},updateWithData:function(a){a&&(b.options.chart.transitionDuration=parseInt(b.options.chart.transitionDuration,10)||250,k.select(c[0]).select("svg").remove(),k.select(c[0]).append("svg").attr("height",b.options.chart.height).attr("width",b.options.chart.width).datum(a).transition().duration(b.options.chart.transitionDuration).call(b.chart),k.select(c[0]).select("svg")[0][0].style.height=b.options.chart.height+"px",k.select(c[0]).select("svg")[0][0].style.width=b.options.chart.width+"px","multiChart"===b.options.chart.type&&b.chart.update())},clearElement:function(){c.find(".title").remove(),c.find(".subtitle").remove(),c.find(".caption").remove(),c.empty(),b.chart=null}},b.$watch("options",function(){!b._config.disabled&&b._config.autorefresh&&b.api.refresh()},!0),b.$watch("data",function(){!b._config.disabled&&b._config.autorefresh&&(b._config.refreshDataOnly?b.chart.update():b.api.refresh())},!0),b.$watch("config",function(a){b._config=angular.extend(m,a),b.api.refresh()},!0),angular.forEach(b.events,function(a,c){b.$on(c,function(c){return a(c,b)})})})}};return b}]);